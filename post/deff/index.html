<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="theme-color" content="dark">
    <title>DEFFç®—æ³•è®ºæ–‡é˜…è¯» | Road to Final</title>

    <meta property="og:site_name" content="Road to Final" />
    <meta property="og:title" content="DEFFç®—æ³•è®ºæ–‡é˜…è¯» | Road to Final"/>
    <meta itemprop="name" content="DEFFç®—æ³•è®ºæ–‡é˜…è¯» | Road to Final" />
    <meta name="twitter:title" content="DEFFç®—æ³•è®ºæ–‡é˜…è¯» | Road to Final" />
    <meta name="application-name" content="DEFFç®—æ³•è®ºæ–‡é˜…è¯» | Road to Final" />
    <meta name="google-site-verification" content="neq0aVeCWe7m8dRcG0DYe70W84dIh8_CqQDqP-G9mlI" />
    <meta name="description" content="Dynamic_scheduling_algorithm_for_parpllel_real_time_jobs_in_heterogeneous_systemè®ºæ–‡é˜…è¯»" />
    <meta name="twitter:description" content="Dynamic_scheduling_algorithm_for_parpllel_real_time_jobs_in_heterogeneous_systemè®ºæ–‡é˜…è¯» "/>
    <meta itemprop="description" content=" Dynamic_scheduling_algorithm_for_parpllel_real_time_jobs_in_heterogeneous_systemè®ºæ–‡é˜…è¯» "/>
    <meta property="og:description" content=" Dynamic_scheduling_algorithm_for_parpllel_real_time_jobs_in_heterogeneous_systemè®ºæ–‡é˜…è¯» " />

    

<meta property="og:type" content="article" />
<meta property="article:publisher" content="Hearecho" />
<meta property="og:article:published_time" content=2021-08-22T15:19:32&#43;0800 />
<meta property="article:published_time" content=2021-08-22T15:19:32&#43;0800 />





<script defer type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "DEFFç®—æ³•è®ºæ–‡é˜…è¯»",
    "author": {
      "@type": "Person",
      "name": "Hearecho"
    },
    "datePublished": "2021-08-22",
    "description": "Dynamic_scheduling_algorithm_for_parpllel_real_time_jobs_in_heterogeneous_systemè®ºæ–‡é˜…è¯»",
    "wordCount":  512 ,
    "mainEntityOfPage": "True",
    "dateModified": "2021-08-22",
    "publisher": {
      "@type": "Organization",
      "name": "Hearecho",
      "logo": {
        "@type": "imageObject",
        "url": "https:\/\/hearecho.github.io\/favicon.ico"
      }
    }
  }
</script>



    <link rel="shortcut icon" type="image/x-icon" href="https://hearecho.github.io/favicon.ico" />
    
    <link rel="stylesheet" href="https://hearecho.github.io/sass/main.min.40aeb6acef96d81040c330db146a4d454b7f961bd5de06d6a1957365ac9232d5.css">
	
</head>

    <body class="dark">
        <nav class="navbar">
    <div class="container">
        <div class="flex">
            <div>
                <a class="brand" href="https://hearecho.github.io/">
                    
                    <span class="emoji">
                        ğŸ˜
                    </span>
                    
                    
                    Road to Final
                    </a>
            </div>
            <div class="flex">
                
                <a href="https://hearecho.github.io/articles/">Articles</a>
                
                <button id="dark-mode-button">
                  <svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="#FFD983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163 0 1 0 1.643 1.641a1.163 1.163 0 0 0-1.643-1.641zm-16.022 14.38a1.74 1.74 0 0 0 0 2.465a1.742 1.742 0 1 0 0-2.465zm13.968-2.147a2.904 2.904 0 0 1-4.108 0a2.902 2.902 0 0 1 0-4.107a2.902 2.902 0 0 1 4.108 0a2.902 2.902 0 0 1 0 4.107z" fill="#FFCC4D"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)" /></svg>
                  <svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="#FFD983" d="M16 2s0-2 2-2s2 2 2 2v2s0 2-2 2s-2-2-2-2V2zm18 14s2 0 2 2s-2 2-2 2h-2s-2 0-2-2s2-2 2-2h2zM4 16s2 0 2 2s-2 2-2 2H2s-2 0-2-2s2-2 2-2h2zm5.121-8.707s1.414 1.414 0 2.828s-2.828 0-2.828 0L4.878 8.708s-1.414-1.414 0-2.829c1.415-1.414 2.829 0 2.829 0l1.414 1.414zm21 21s1.414 1.414 0 2.828s-2.828 0-2.828 0l-1.414-1.414s-1.414-1.414 0-2.828s2.828 0 2.828 0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828 0s0-2.828 0-2.828l1.414-1.414s1.414-1.414 2.828 0s0 2.828 0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828 0s0-2.828 0-2.828l1.414-1.414s1.414-1.414 2.828 0s0 2.828 0 2.828l-1.414 1.414zM16 32s0-2 2-2s2 2 2 2v2s0 2-2 2s-2-2-2-2v-2z"/><circle fill="#FFD983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)" /></svg>
                </button>
            </div>
            </div>
    </div>
</nav>
        <main>
            
<div class="container">
    <article>
        <header class="article-header">
            <div class="thumb">
                <div>
                    <h1>DEFFç®—æ³•è®ºæ–‡é˜…è¯»</h1>
                    <div class="post-meta">
                        <div>
                            
                            
                              
                            
                            By Hearecho | <time>August 22, 2021</time>
                            | 3 minutes |512 Words
                        </div>
                        <div class="tags">
                            
                            <a href="https://hearecho.github.io/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">è®ºæ–‡é˜…è¯»</a>
                            
                            <a href="https://hearecho.github.io/tags/dag/">DAG</a>
                            
                            <a href="https://hearecho.github.io/tags/%E7%AE%97%E6%B3%95/">ç®—æ³•</a>
                            
                            <a href="https://hearecho.github.io/tags/%E5%8A%A8%E6%80%81%E8%B0%83%E5%BA%A6/">åŠ¨æ€è°ƒåº¦</a>
                            
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </article>

    <div class="article-post">
    <h1 id="è®ºæ–‡ä»‹ç»">è®ºæ–‡ä»‹ç»</h1>
<p>ã€ŠDynamic_scheduling_algorithm_for_parpllel_real_time_jobs_in_heterogeneous_systemã€‹</p>
<blockquote>
<p>å¼‚æ„ç³»ç»Ÿä¸­å¹¶è¡Œå®æ—¶ä½œä¸šçš„åŠ¨æ€ä»»åŠ¡è°ƒåº¦ä»ç„¶æ˜¯ä¸€äº›ç ”ç©¶äººå‘˜æ­£åœ¨ç ”ç©¶çš„å…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚ä½†æ˜¯åŸºäºDAGçš„å®æ—¶ä»»åŠ¡è°ƒåº¦è¿˜æ²¡æœ‰å¾—åˆ°è¶³å¤Ÿçš„é‡è§†ã€‚æå‡ºäº†ä¸€ç§åŸºäºDAGçš„å®æ—¶ä»»åŠ¡è°ƒåº¦æ¨¡å‹å’Œä¸€ç§æ—¶é—´å¤æ‚åº¦è¾ƒä½çš„å®æ—¶è°ƒåº¦ç®—æ³•DEFFã€‚ä»¿çœŸå®éªŒè¡¨æ˜ï¼Œè¯¥è°ƒåº¦æ¨¡å‹å’Œè°ƒåº¦ç®—æ³•æ˜¯å¯è¡Œçš„ï¼Œåœ¨ä¸­å°å‹å¹¶è¡Œä½œä¸šçš„æƒ…å†µä¸‹ï¼Œè¯¥ç®—æ³•å¯ä»¥è·å¾—è¾ƒé«˜çš„è°ƒåº¦æˆåŠŸç‡</p>
</blockquote>
<h3 id="æ¨¡å‹ç¬¦å·">æ¨¡å‹ç¬¦å·</h3>
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>$V$</td>
<td>å®æ—¶ä»»åŠ¡é›†åˆ</td>
</tr>
<tr>
<td>$E$</td>
<td>ä»»åŠ¡ä¹‹é—´é€šä¿¡</td>
</tr>
<tr>
<td>$dl(v_i)$</td>
<td>ä»»åŠ¡$v_i$çš„æˆªè‡³æ—¶é—´</td>
</tr>
<tr>
<td>$cv_i$</td>
<td>ä»»åŠ¡$v_i$çš„è®¡ç®—é‡</td>
</tr>
<tr>
<td>$e_{i,j}=(v_i,v_j)$</td>
<td>è¡¨ç¤ºä»»åŠ¡$v_i,v_j$ä¹‹é—´çš„é€šä¿¡é‡</td>
</tr>
<tr>
<td>$P$</td>
<td>å¤„ç†å™¨é›†åˆ</td>
</tr>
<tr>
<td>$p_i$</td>
<td>æ‹¥æœ‰æœ¬åœ°å­˜å‚¨çš„å¤„ç†å™¨</td>
</tr>
<tr>
<td>$C:V*P \rightarrow R$</td>
<td>è¡¨ç¤ºä¸åŒçš„è®¡ç®—èƒ½åŠ›</td>
</tr>
<tr>
<td>$w_k$</td>
<td>è¡¨ç¤ºå¤„ç†å™¨$p_k$åœ¨å•ä½æ—¶é—´å†…çš„è®¡ç®—é‡</td>
</tr>
<tr>
<td>$cv_i/w_k$</td>
<td>è¡¨ç¤ºä»»åŠ¡$v_i$åœ¨å¤„ç†å™¨$p_k$ä¸Šçš„è®¡ç®—æ—¶é—´</td>
</tr>
<tr>
<td>$M:E * P * P \rightarrow R$</td>
<td>è¡¨ç¤ºå¼‚æ„é€šä¿¡èƒ½åŠ›ã€‚</td>
</tr>
<tr>
<td>$w_{km}$</td>
<td>è¡¨ç¤ºå¤„ç†å™¨$p_k,p_m$ä¹‹é—´å•ä½é•¿åº¦ä¿¡æ¯çš„ä¼ è¾“æ—¶é—´</td>
</tr>
<tr>
<td>$w_{km}*e_{i,j}$</td>
<td>è¡¨ç¤º$e_{i,j}$çš„ä¼ è¾“æ—¶é—´</td>
</tr>
<tr>
<td>queue-Global  Job  Queue ï¼ˆGJQï¼‰</td>
<td>å…¨å±€ä½œä¸šé˜Ÿåˆ—ï¼Œæ‰€æœ‰åˆ°è¾¾ç³»ç»Ÿçš„ä»»åŠ¡é¦–å…ˆéƒ½è¦è¿›å…¥è¿™ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç„¶åå†è¿›å…¥ä¸­å¿ƒè°ƒåº¦å™¨ã€‚è¿›å…¥è¿™ä¸ªé˜Ÿåˆ—çš„æ˜¯DAGä»»åŠ¡</td>
</tr>
<tr>
<td>queue-Task Dispatch  Queue  (TDQ)</td>
<td>å’Œä¸­å¿ƒè°ƒåº¦å™¨è¿›è¡Œäº¤äº’çš„ï¼Œåˆ†è§£ä¹‹åçš„dagå­ä»»åŠ¡</td>
</tr>
<tr>
<td>Local Scheduling Queue (LSQ)</td>
<td>æ¯ä¸ªå¤„ç†å™¨æ‹¥æœ‰çš„æœ¬åœ°ä»»åŠ¡é˜Ÿåˆ—</td>
</tr>
<tr>
<td>$at(p_k)$</td>
<td>å¤„ç†å™¨$p_k$çš„æœ€æ—©ç©ºé—²æ—¶é—´</td>
</tr>
<tr>
<td>$st_k(v_i)$</td>
<td>å®æ—¶ä»»åŠ¡$v_i$çš„æœ€æ—©å¼€å§‹æ—¶é—´</td>
</tr>
<tr>
<td>$ft_k(v_i)$</td>
<td>æ˜ å°„åˆ°å¤„ç†å™¨$p_k$å®æ—¶ä»»åŠ¡$v_i$çš„æœ€æ—©å®Œæˆæ—¶é—´</td>
</tr>
</tbody>
</table>
<h4 id="è°ƒåº¦ç®—æ³•">è°ƒåº¦ç®—æ³•</h4>
<h5 id="å®šä¹‰1">å®šä¹‰1</h5>
<blockquote>
<p>å¦‚æœæ˜ å°„åˆ°å¤„ç†å™¨$p_k$å®æ—¶ä»»åŠ¡$v_i$çš„æœ€æ—©å®Œæˆæ—¶é—´$ft_k(v_i)$å°äºç­‰äºä»»åŠ¡$v_i$çš„æˆªè‡³æ—¶é—´$dl(v_i)$ï¼Œåˆ™å®æ—¶ä»»åŠ¡$v_i$å¯ä»¥è¢«è°ƒåº¦åˆ°å¤„ç†å™¨$p_k$ä¸­ã€‚</p>
</blockquote>
<h5 id="å®šä¹‰2">å®šä¹‰2</h5>
<blockquote>
<p>æ˜ å°„åˆ°å¤„ç†å™¨$p_k$å®æ—¶ä»»åŠ¡$v_i$çš„æœ€æ—©å®Œæˆæ—¶é—´$ft_k(v_i)$è¢«å®šä¹‰ä¸º:$$ft_k(v_i) = cv_i/w_k + max(st_k(v_i),at(p_k))$$</p>
</blockquote>
<h5 id="å®šä¹‰3">å®šä¹‰3</h5>
<blockquote>
<p>å®æ—¶ä»»åŠ¡$v_i$çš„æœ€æ—©å¼€å§‹æ—¶é—´$st_k(v_i)$è¢«å®šä¹‰ä¸º:$st_k(v_i)=max_{v_j\in pred(v_i)}( ft_m(v_j+w_{mk}*e_{i,j}))$;å…¶ä¸­$pred(v_i)$è¡¨ç¤ºä»»åŠ¡$v_i$çš„å‰ä¸€ä¸ªé›†åˆã€‚</p>
</blockquote>
<h3 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h3>
<h4 id="deffè°ƒåº¦ç®—æ³•">deffè°ƒåº¦ç®—æ³•</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s2">&#34;&#34;&#34;
</span><span class="s2">è®ºæ–‡ç®—æ³•å®ç°
</span><span class="s2">deff
</span><span class="s2">AST æœ¬æ¬¡deffè°ƒåº¦ç®—æ³•å¯åŠ¨çš„æ—¶é—´
</span><span class="s2">AFT ä¸Šæ¬¡deffè°ƒåº¦ç®—æ³•ç»“æŸçš„æ—¶é—´
</span><span class="s2">DIFT ä¸­é—´çš„æ’å€¼  DIFT = AST-DIFT
</span><span class="s2">&#34;&#34;&#34;</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">def</span> <span class="nf">deff</span><span class="p">(</span><span class="n">AFT</span><span class="p">,</span> <span class="n">processors</span><span class="p">,</span> <span class="n">tasks_dtq</span><span class="p">,</span> <span class="n">tasks_scheduled</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">cp_w</span><span class="p">,</span> <span class="n">deL_dag_tasks</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    :param deL_dag_tasks: æ— æ³•è¿›è¡Œè°ƒåº¦çš„dagä»»åŠ¡
</span><span class="s2">    :param cp_w: å¤„ç†å™¨çš„è®¡ç®—èƒ½åŠ›ä¸€ä¸ªæ•°ç»„
</span><span class="s2">    :param e: è¡¨ç¤ºä»»åŠ¡ä¹‹é—´çš„é€šä¿¡é‡ï¼Œä¸€ä¸ªå­—å…¸  e[task_i][task_j]è¡¨ç¤ºä¸¤ä¸ªä»»åŠ¡ä¹‹é—´çš„é€šä¿¡é‡
</span><span class="s2">    :param w: è¡¨ç¤ºå¤„ç†å™¨ä¹‹é—´å•ä½é•¿åº¦ä¿¡æ¯çš„ä¼ è¾“æ—¶é—´  äºŒç»´çŸ©é˜µ
</span><span class="s2">    :param tasks_scheduled: å·²ç»è¢«è°ƒåº¦è¿‡çš„ä»»åŠ¡
</span><span class="s2">    :param tasks_dtq: dtqä¸­çš„å‡†å¤‡è¢«è°ƒåº¦çš„ä»»åŠ¡é˜Ÿåˆ—
</span><span class="s2">    :param AFT: ä¸Šæ¬¡deffè°ƒåº¦ç®—æ³•ç»“æŸçš„æ—¶é—´
</span><span class="s2">    :param processors: å¤„ç†å™¨æ•°ç»„ï¼Œæ¯ä¸ªå¤„ç†å™¨å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—æ®µå‚¨å­˜å¤„ç†å™¨ç›¸å…³çš„ä¿¡æ¯
</span><span class="s2">    :return:
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">DIFT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">AFT</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processors</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">DIFT</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="n">DIFT</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tasks_scheduled</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span> <span class="o">-</span> <span class="n">DIFT</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span> <span class="o">-</span> <span class="n">DIFT</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks_dtq</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">tasks_dtq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># å¦‚æœè¯¥å­ä»»åŠ¡çš„å…¶ä»–ä»»åŠ¡å·²ç»å­˜åœ¨ä¸å¯è°ƒåº¦çš„å­ä»»åŠ¡ åˆ™ç›´æ¥èˆå¼ƒ</span>
        <span class="k">if</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;father&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">deL_dag_tasks</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">sps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">processors</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;pred&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">max_st</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">for</span> <span class="n">pred_task</span> <span class="ow">in</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;pred&#39;</span><span class="p">]:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="n">pred_task</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">pred_task</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="n">pred_task</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">e</span><span class="p">[</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]][</span>
                        <span class="n">pred_task</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span>
                    <span class="k">if</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="n">max_st</span><span class="p">:</span>
                        <span class="n">max_st</span> <span class="o">=</span> <span class="n">temp</span>
                <span class="n">task</span><span class="p">[</span><span class="s1">&#39;st&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_st</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">task</span><span class="p">[</span><span class="s1">&#39;st&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">task</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">cp_w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;st&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">processors</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;at&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;dl&#39;</span><span class="p">]:</span>
                <span class="n">sps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sps</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">min_p</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">min_p_ft</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">sps</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">min_p_ft</span><span class="p">:</span>
                    <span class="n">min_p</span> <span class="o">=</span> <span class="n">p</span>
                    <span class="n">min_p_ft</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]]</span>
            <span class="n">task</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_p</span>
            <span class="n">min_p</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_p_ft</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># æ— æ³•è¿›è¡Œè°ƒåº¦ï¼ˆä¹Ÿå°±æ˜¯è°ƒåº¦æœ€åå®æ—¶æ€§ä¸æ»¡è¶³ï¼Œç›´æ¥èˆå¼ƒï¼‰</span>
            <span class="c1"># éœ€è¦åˆ é™¤çš„æ˜¯è¿™ä¸ªå­ä»»åŠ¡æ‰€å±dagä»»åŠ¡çš„æ‰€æœ‰ä»»åŠ¡ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬å·²ç»è°ƒåº¦ã€‚</span>
            <span class="n">deL_dag_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;father&#39;</span><span class="p">])</span>
            <span class="c1"># æˆ‘çš„åšæ³•æ˜¯ä¸åœ¨è¿™é‡Œåˆ é™¤ï¼Œåªæ˜¯å°†è¿™ä¸ªä»»åŠ¡æ‰€å±çš„dagä»»åŠ¡åŠ å…¥åˆ°ä¸€ä¸ªå†…å­˜ä¸­è¿›è¡Œå­˜å‚¨</span>
            <span class="c1"># ä¹‹åå†è¿›è¡Œå†ä»gjqå‘tdqè°ƒåº¦çš„æ—¶å€™è¿›è¡Œåˆ¤æ–­ ç„¶åæ‰§è¡Œç®—æ³•çš„æ—¶å€™è¿›è¡Œåˆ¤æ–­ä¸å¯¹ä»–ä»¬è¿›è¡Œè°ƒåº¦å³å¯</span>
        <span class="n">tasks_dtq</span> <span class="o">=</span> <span class="n">tasks_dtq</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># è¿”å›ç®—æ³•ç»“æŸæ—¶é—´</span>
    <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="è§¦å‘å™¨ç®—æ³•">è§¦å‘å™¨ç®—æ³•</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s2">&#34;&#34;&#34;
</span><span class="s2">è®ºæ–‡è°ƒåº¦å™¨çš„è§¦å‘ç®—æ³•å®ç°
</span><span class="s2">è§¦å‘å™¨çš„è§¦å‘æ¡ä»¶ï¼Œä¸€ä¸ªæ–°çš„dagä»»åŠ¡å›¾åˆ°è¾¾ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸€ä¸ªå­ä»»åŠ¡å®Œæˆåˆ™ä¼šè°ƒç”¨è§¦å‘å™¨ç®—æ³•
</span><span class="s2">è°ƒç”¨è§¦å‘å™¨çš„æ—¶åˆ»ï¼Œå½“GJQæ–°åˆ°è¾¾ä¸€ä¸ªdagä»»åŠ¡æˆ–è€…æ˜¯ä¸€ä¸ªå­ä»»åŠ¡å®Œæˆäº†
</span><span class="s2">GJQ å…¨å±€ä½œä¸šé˜Ÿåˆ—
</span><span class="s2">TDQ ä»»åŠ¡åˆ†å‘é˜Ÿåˆ—
</span><span class="s2">&#34;&#34;&#34;</span>
<span class="k">def</span> <span class="nf">trigger</span><span class="p">(</span><span class="n">completed_tasks</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">trigger_type</span><span class="p">,</span> <span class="n">remain_tasks</span><span class="p">,</span> <span class="n">TDQ</span><span class="p">,</span> <span class="n">completed_job</span><span class="p">,</span> <span class="n">GJQ</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    :param GJQ: jobé˜Ÿåˆ—
</span><span class="s2">    :param completed_job: å®Œæˆçš„å¹¶è¡Œä»»åŠ¡
</span><span class="s2">    :param TDQ:
</span><span class="s2">    :param remain_tasks: å‰©ä½™ä»»åŠ¡
</span><span class="s2">    :param trigger_type: 0 æ–°jobåˆ°è¾¾  1 ä»»åŠ¡å®Œæˆ
</span><span class="s2">    :param completed_tasks: å·²ç»å®Œæˆçš„å­ä»»åŠ¡ï¼Œå­—å…¸æ ¼å¼ï¼Œkeyä¸ºdagä»»åŠ¡çš„å›¾
</span><span class="s2">    :param task: å®Œæˆçš„ä»»åŠ¡æˆ–è€…æ˜¯æ–°åˆ°çš„dagä»»åŠ¡çš„å¼€å¤´ä»»åŠ¡ï¼Œ
</span><span class="s2">    :return:
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="n">trigger_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># å°†æ‰€æœ‰çš„å…¥å£ä»»åŠ¡éƒ½åŠ è¿›å» ä¹Ÿå°±æ˜¯æ²¡æœ‰å‰ç»§çš„ä»»åŠ¡</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">remain_tasks</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;pred&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">TDQ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                <span class="c1"># ä»å‰©ä½™ä»»åŠ¡ä¸­åˆ é™¤è¿™ä¸ªä»»åŠ¡</span>
                <span class="n">remain_tasks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remain_tasks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># ä»»åŠ¡å®Œæˆ</span>
            <span class="n">completed_job</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;father&#39;</span><span class="p">]:</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;ft&#39;</span><span class="p">][</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;mapped_p&#39;</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]]})</span>
            <span class="k">return</span>
        <span class="n">completed_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">remain_tasks</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;pred&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">TDQ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                <span class="c1"># ä»å‰©ä½™ä»»åŠ¡ä¸­åˆ é™¤è¿™ä¸ªä»»åŠ¡</span>
                <span class="n">remain_tasks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">pred_t</span> <span class="ow">in</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;pred&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">pred_t</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">completed_tasks</span><span class="p">:</span>
                        <span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
                    <span class="n">TDQ</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                    <span class="c1"># ä»å‰©ä½™ä»»åŠ¡ä¸­åˆ é™¤è¿™ä¸ªä»»åŠ¡</span>
                    <span class="n">remain_tasks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>
</div>

<div class="container">
    
    <nav class="flex container suggested">
        
        <a rel="prev" href="https://hearecho.github.io/post/surver-dynamic-dag-schedule/" title="Previous post (older)">
            <span>Previous</span>
            Surver Dynamic Dag Schedule
            </a>
        
        
        
        <a rel="next" href="https://hearecho.github.io/post/heft%E7%AE%97%E6%B3%95-%E9%9D%99%E6%80%81%E8%B0%83%E5%BA%A6/" title="Next post (newer)">
            <span>Next</span>
            HEFTç®—æ³• é™æ€è°ƒåº¦
            </a> 
        
    </nav>
    
</div>
</main>


        </main>
        <footer class="footer flex">
    <section class="container">
        <nav class="footer-links">
            
            <a href="https://hearecho.github.io/index.xml">ğŸ“¡</a>
            
        </nav>
    </section>
    <script type="text/javascript">
        window.MathJax = {
            tex: {
                inlineMath: [['$','$'], ['\\(','\\)']],
            }
        };
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>
    <script async src="https://hearecho.github.io/ts/features.aae54872a4ce10f31183401ffe494fdc7160fa4925869741aee7ab580afc9908.js" data-enable-footnotes="true"></script>
</footer>
    </body>
</html>